# ç”Ÿäº§ç¯å¢ƒé…ç½®è¯´æ˜

## âš ï¸ å…³äºå¼€å‘æœåŠ¡å™¨è­¦å‘Š

æ‚¨çœ‹åˆ°çš„è­¦å‘Šä¿¡æ¯ï¼š
```
WARNING: This is a development server. Do not use it in a production deployment.
```

è¿™æ˜¯Flaskå¼€å‘æœåŠ¡å™¨çš„æ­£å¸¸æç¤ºï¼Œ**ä¸å½±å“å¼€å‘ä½¿ç”¨**ã€‚å®ƒåªæ˜¯æé†’æ‚¨ï¼š
- âœ… **å¼€å‘ç¯å¢ƒ**ï¼šå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ— éœ€æ‹…å¿ƒ
- âŒ **ç”Ÿäº§ç¯å¢ƒ**ï¼šéœ€è¦ä½¿ç”¨ä¸“ä¸šçš„WSGIæœåŠ¡å™¨ï¼ˆå¦‚Gunicornã€uWSGIç­‰ï¼‰

## ğŸ”§ å·²å¤„ç†çš„è­¦å‘Š

ä»£ç å·²ç»é…ç½®ä¸ºåœ¨å¼€å‘æ¨¡å¼ä¸‹éšè—æ­¤è­¦å‘Šï¼Œæ‚¨ä¸ä¼šå†çœ‹åˆ°è¿™ä¸ªæç¤ºä¿¡æ¯ã€‚

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆ

å¦‚æœå°†æ¥éœ€è¦éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨ Gunicornï¼ˆæ¨èï¼‰

**å®‰è£…Gunicornï¼š**
```bash
pip install gunicorn
```

**å¯åŠ¨å‘å¸ƒç«¯ï¼š**
```bash
gunicorn -w 4 -b 127.0.0.1:5000 publish_app:app
```

**å¯åŠ¨è®¢é˜…ç«¯ï¼š**
```bash
gunicorn -w 4 -b 127.0.0.1:5001 subscribe_app:app
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨ Waitressï¼ˆWindowså‹å¥½ï¼‰

**å®‰è£…Waitressï¼š**
```bash
pip install waitress
```

**åˆ›å»ºç”Ÿäº§å¯åŠ¨è„šæœ¬ `run_production.py`ï¼š**
```python
from waitress import serve
from publish_app import app as publish_app
from subscribe_app import app as subscribe_app
import threading

def run_publish():
    serve(publish_app, host='127.0.0.1', port=5000)

def run_subscribe():
    serve(subscribe_app, host='127.0.0.1', port=5001)

if __name__ == '__main__':
    t1 = threading.Thread(target=run_publish)
    t2 = threading.Thread(target=run_subscribe)
    t1.start()
    t2.start()
    t1.join()
    t2.join()
```

### æ–¹æ¡ˆ3ï¼šä½¿ç”¨ Nginx + Gunicornï¼ˆLinuxç”Ÿäº§ç¯å¢ƒï¼‰

**Nginxé…ç½®ç¤ºä¾‹ï¼š**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location /publish {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /subscribe {
        proxy_pass http://127.0.0.1:5001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ“ å½“å‰é…ç½®è¯´æ˜

**å¼€å‘æ¨¡å¼é…ç½®ï¼š**
- `debug=True`ï¼šå¯ç”¨è°ƒè¯•æ¨¡å¼ï¼Œä»£ç ä¿®æ”¹åè‡ªåŠ¨é‡è½½
- `use_reloader=False`ï¼šç¦ç”¨è‡ªåŠ¨é‡è½½å™¨ï¼Œé¿å…é‡å¤è­¦å‘Š
- å·²é…ç½®è­¦å‘Šè¿‡æ»¤å™¨ï¼Œéšè—å¼€å‘æœåŠ¡å™¨æç¤º

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… æœ¬åœ°å¼€å‘
- âœ… æµ‹è¯•ç¯å¢ƒ
- âœ… æ¼”ç¤ºç¯å¢ƒ
- âŒ ç”Ÿäº§ç¯å¢ƒï¼ˆéœ€è¦ä½¿ç”¨WSGIæœåŠ¡å™¨ï¼‰

## ğŸ”’ å®‰å…¨å»ºè®®

**å¼€å‘ç¯å¢ƒï¼š**
- ä½¿ç”¨ `127.0.0.1` æˆ– `localhost`ï¼Œä»…æœ¬åœ°è®¿é—®
- å¯ç”¨è°ƒè¯•æ¨¡å¼ä¾¿äºå¼€å‘

**ç”Ÿäº§ç¯å¢ƒï¼š**
- ä½¿ç”¨ä¸“ä¸šçš„WSGIæœåŠ¡å™¨
- é…ç½®HTTPS
- è®¾ç½®é€‚å½“çš„é˜²ç«å¢™è§„åˆ™
- ç¦ç”¨è°ƒè¯•æ¨¡å¼
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿé…ç½®

## ğŸ“š ç›¸å…³èµ„æº

- [Flaskéƒ¨ç½²æ–‡æ¡£](https://flask.palletsprojects.com/en/latest/deploying/)
- [Gunicornæ–‡æ¡£](https://gunicorn.org/)
- [Waitressæ–‡æ¡£](https://docs.pylonsproject.org/projects/waitress/)

---

**æ€»ç»“ï¼š** å½“å‰è­¦å‘Šå·²å¤„ç†ï¼Œå¼€å‘ç¯å¢ƒå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚å¦‚éœ€éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè¯·å‚è€ƒä¸Šè¿°æ–¹æ¡ˆã€‚


